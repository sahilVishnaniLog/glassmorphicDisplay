flowchart TD
    subgraph "State & Data Sources"
        direction TB
        A["<b>ThemeProviderWrapper</b><br/>(Holds state via <b>useState</b>)<br/>- modeChoice<br/>- backgroundImg<br/>- backgroundColor"]
        B["<b>backgrounds.js</b><br/>(Data File)"]
        C["<b>color.js</b><br/>(Data File)"]
        D["<b>App.jsx</b><br/>(Local Data)<br/>- Hardcoded 'tasks' array"]
    end

    subgraph "Context Provider"
        P["<b>ThemeContext</b><br/>(React Context)<br/>- Provides state & setters<br/>- Exports <b>useTheme()</b> hook"]
    end

    subgraph "Consuming Components"
        H["<b>ThemePopover</b><br/>- Calls useTheme()<br/>- Sets <b>modeChoice</b>"]
        I["<b>BackgroundPopover</b><br/>- Calls useTheme()<br/>- Sets <b>backgroundImg</b>"]
        J["<b>ColorPopover</b><br/>- Calls useTheme()<br/>- Sets <b>backgroundColor</b>"]
        K["<b>KanbanCard</b><br/>- Receives 'task' prop"]
    end
    
    A --> P;
    P -- "useTheme()" --> H;
    P -- "useTheme()" --> I;
    P -- "useTheme()" --> J;
    
    B -- "import" --> I;
    C -- "import" --> J;
    D -- "Passes 'task' prop" --> K;